from discord import Embed
from datetime import datetime

from typing import Tuple, List
import ast 

ultString = """
{'data': {'reportData': {'report': {'masterData': {'actors': [{'id': -1, 'name': 'Environment'}, {'id': 1, 'name': 'Sol Li'}, {'id': 2, 'name': 'Twintania'}, {'id': 3, 'name': "Rai'en Enkidou"}, {'id': 4, 'name': 'Kara Kielle'}, {'id': 5, 'name': 'Violet Calistria'}, {'id': 6, 'name': 'Coconut Coco'}, {'id': 7, 'name': 'Vrag Szad'}, {'id': 8, 'name': 'Shadow Moons'}, {'id': 9, 'name': 'Atsume Alamort'}, {'id': 10, 'name': 'Multiple Players'}, {'id': 11, 'name': 'Carbuncle'}, {'id': 12, 'name': 'Garuda-Egi'}, {'id': 13, 'name': ''}, {'id': 14, 'name': 'Oviform'}, {'id': 15, 'name': 'Oviform'}, {'id': 16, 'name': 'Demi-Bahamut'}, {'id': 17, 'name': 'Ifrit-Egi'}, {'id': 18, 'name': 'Earthly Star'}, {'id': 19, 'name': 'Titan-Egi'}, {'id': 20, 'name': 'Nael Geminus'}, {'id': 21, 'name': 'Nael Deus Darnus'}, {'id': 22, 'name': 'Fang Of Light'}, {'id': 23, 'name': 'Tail Of Darkness'}, {'id': 24, 'name': 'Thunderwing'}, {'id': 25, 'name': 'Iceclaw'}, {'id': 26, 'name': 'Firehorn'}, {'id': 27, 'name': 'Limit Break'}, {'id': 28, 'name': 'Bahamut Prime'}, {'id': 29, 'name': 'Multiple Enemies'}, {'id': 30, 'name': 'Ragnar Thereux'}, {'id': 31, 'name': 'Yinyinji Yinji'}, {'id': 32, 'name': 'Juinta Reyon'}, {'id': 33, 'name': 'Peter Trash'}, {'id': 34, 'name': ''}, {'id': 35, 'name': 'Tato Chan'}, {'id': 36, 'name': ''}, {'id': 37, 'name': 'Keishypoo Uwu'}, {'id': 38, 'name': 'Farah Ragnall'}, {'id': 39, 'name': 'Ayleth Wright'}, {'id': 40, 'name': 'Pahja Amarah'}, {'id': 41, 'name': 'Ezrien Orais'}, {'id': 42, 'name': 'Cooked Toast'}, {'id': 43, 'name': 'Rory Grimms'}, {'id': 44, 'name': 'Venessa Skyborn'}, {'id': 45, 'name': 'Amybelle Teonis'}, {'id': 46, 'name': 'Asteon Vaerzel'}, {'id': 47, 'name': 'Sierra Fantasy'}, {'id': 48, 'name': "Xil'thas Gwathre'nun"}, {'id': 49, 'name': 'Toko Alouette'}, {'id': 50, 'name': 'Sylvan Thorne'}, {'id': 51, 'name': 'Mint Julep'}, {'id': 52, 'name': 'Ahri Kaedehara'}, {'id': 53, 'name': "Heaven's Night"}, {'id': 54, 'name': 'Liviana Noir'}, {'id': 55, 'name': 'Happy Peter'}, {'id': 56, 'name': 'Valeria Straylight'}, {'id': 57, 'name': 'Farah Ragnall'}, {'id': 58, 'name': 'Clive Yaeger'}, {'id': 59, 'name': 'Lady Akane'}, {'id': 60, 'name': 'Percy Ardenne'}, {'id': 61, 'name': 'Theophilain Majere'}, {'id': 62, 'name': 'Aura Doom'}, {'id': 63, 'name': 'Clotilde Valeroyant'}, {'id': 64, 'name': "Tae'yeon Kim"}, {'id': 65, 'name': 'Shoo Shoo'}, {'id': 66, 'name': 'Surya Sunbeam'}, {'id': 67, 'name': 'Ishtar Anastasia'}, {'id': 68, 'name': 'Zelolo Zelo'}, {'id': 69, 'name': 'Annette Hitachine'}, {'id': 70, 'name': 'Faye Veena'}, {'id': 71, 'name': 'Hikome Kabuto'}, {'id': 72, 'name': "Draug Ban'ul"}, {'id': 73, 'name': "Tae'yeon Kim"}, {'id': 74, 'name': 'Carbuncle'}, {'id': 75, 'name': 'Hikome Kabuto'}, {'id': 76, 'name': 'Carbuncle'}, {'id': 77, 'name': 'Thane Trychimar'}, {'id': 78, 'name': 'Jolene Nounet'}, {'id': 79, 'name': 'Earthly Star'}, {'id': 80, 'name': 'Dracuns Ryder'}, {'id': 81, 'name': 'Keishypoo Uwu'}, {'id': 82, 'name': 'Hikome Kabuto'}, {'id': 83, 'name': 'Marina Domek'}, {'id': 84, 'name': "D'cera Ress"}, {'id': 85, 'name': 'Gwynnalla Khaa'}, {'id': 86, 'name': 'Jing Coresh'}, {'id': 87, 'name': 'Veis Miret-njer'}, {'id': 88, 'name': 'Azie Emet'}, {'id': 89, 'name': 'Yuki Nonaka'}, {'id': 90, 'name': 'Shrathina Helaa'}, {'id': 91, 'name': "Amania Do'urden"}, {'id': 92, 'name': 'Ivyndra Wiltswys'}, {'id': 93, 'name': "Tae'yeon Kim"}, {'id': 94, 'name': 'Just Vibin'}, {'id': 95, 'name': 'Sar Tor'}, {'id': 96, 'name': 'Suju Kuan'}, {'id': 97, 'name': 'Vivi Hoshiko'}, {'id': 98, 'name': 'Frenchtoast Andsyrup'}, {'id': 99, 'name': 'Luxie Hart'}, {'id': 100, 'name': "Y' Y'"}, {'id': 101, 'name': 'Thar Stoksker'}, {'id': 102, 'name': 'Valryia Arwen'}, {'id': 103, 'name': 'Boltgir Ukrin'}, {'id': 104, 'name': 'Offucia Revale'}, {'id': 105, 'name': 'Alyaerys Chandler'}, {'id': 106, 'name': 'Sager Step-on-me'}, {'id': 107, 'name': 'Wodanaz Odr'}, {'id': 108, 'name': 'Rei Hayashi'}, {'id': 109, 'name': 'Nadaki Vanima'}, {'id': 110, 'name': 'Eos'}, {'id': 111, 'name': 'Kyoti Crestfallen'}, {'id': 112, 'name': "A'ster Tia"}, {'id': 113, 'name': 'Kakler Skinner'}, {'id': 114, 'name': 'Hikome Kabuto'}, {'id': 115, 'name': 'Atlanna Love'}, {'id': 116, 'name': 'Erma Tersanu'}, {'id': 117, 'name': 'Sojhin Pendrag'}, {'id': 118, 'name': 'Jensen Jakov'}, {'id': 119, 'name': 'Noai Dei-ijla'}, {'id': 120, 'name': 'Draco Blackfyre'}, {'id': 121, 'name': 'Yuki Nonaka'}, {'id': 122, 'name': 'Camellia Mercer'}, {'id': 123, 'name': 'Athena Whispersurge'}, {'id': 124, 'name': 'Frenchtoast Andsyrup'}, {'id': 125, 'name': 'Hikome Kabuto'}, {'id': 126, 'name': 'Snacky Cakes'}, {'id': 127, 'name': 'Stein Phite'}, {'id': 128, 'name': 'Weiss Von-drachenberg'}, {'id': 129, 'name': 'Stein Phite'}, {'id': 130, 'name': 'Farah Ragnall'}, {'id': 131, 'name': 'Bophades Ligmaseus'}, {'id': 132, 'name': 'Umeyasha Mellissan'}, {'id': 133, 'name': 'Rue Thaelmore'}, {'id': 134, 'name': 'Rokkr Raah-zen'}, {'id': 135, 'name': 'Oir Almathen'}, {'id': 136, 'name': 'Mochi Moks'}, {'id': 137, 'name': 'Fridge Dollar'}, {'id': 138, 'name': 'Farah Ragnall'}, {'id': 139, 'name': 'Erma Tersanu'}, {'id': 140, 'name': 'Ishtar Anastasia'}, {'id': 141, 'name': 'Lorian Cromwell'}, {'id': 142, 'name': 'Revy Ironcrusher'}, {'id': 143, 'name': 'Aqua Fair'}, {'id': 144, 'name': 'Entele Hyguar'}, {'id': 145, 'name': 'Ek Lethe'}, {'id': 146, 'name': 'Montreal Xur'}, {'id': 147, 'name': 'Tidane Locksquall'}, {'id': 148, 'name': 'Jyra Nimo'}, {'id': 149, 'name': 'Xaph Astraeus'}, {'id': 150, 'name': 'Yxel Yoshioka'}, {'id': 151, 'name': 'Zoey Raposa'}, {'id': 152, 'name': 'Kearan Shadowsong'}, {'id': 153, 'name': 'Vvee Ddee'}, {'id': 154, 'name': 'Salty Buttlet'}, {'id': 155, 'name': 'Mercy Mae'}, {'id': 156, 'name': 'Balado Dulado'}, {'id': 157, 'name': 'Alyxandria Hyromire'}, {'id': 158, 'name': 'Hikome Kabuto'}, {'id': 159, 'name': 'Mr Chedda'}, {'id': 160, 'name': 'Liv Twigsnapper'}, {'id': 161, 'name': 'Farah Ragnall'}, {'id': 162, 'name': 'Urvogel Teryx'}, {'id': 163, 'name': 'Yan Yans'}, {'id': 164, 'name': 'liturgic bell'}, {'id': 165, 'name': 'Hikome Kabuto'}, {'id': 166, 'name': 'Alyx Jay'}, {'id': 167, 'name': 'Hikome Kabuto'}, {'id': 168, 'name': 'Equidar Novasch'}, {'id': 169, 'name': 'Wodanaz Odr'}, {'id': 170, 'name': 'Aimi Nelas'}, {'id': 171, 'name': 'Amybelle Teonis'}, {'id': 172, 'name': 'Aimona Winter'}, {'id': 173, 'name': 'Nanet Moon'}, {'id': 174, 'name': 'Droknar Maverlis'}, {'id': 175, 'name': 'Shadow Hunt'}, {'id': 176, 'name': 'Raux Fort'}, {'id': 177, 'name': 'Rjomi Dei-ijla'}, {'id': 178, 'name': 'Ouka Ootori'}, {'id': 179, 'name': 'Evette Corvus'}, {'id': 180, 'name': 'Rev Ix'}, {'id': 181, 'name': 'Todd Finn'}, {'id': 182, 'name': 'Farah Ragnall'}, {'id': 183, 'name': 'Lucie Beaumont'}, {'id': 184, 'name': 'Yefkey Yekel'}, {'id': 185, 'name': "I'datih Tio"}, {'id': 186, 'name': 'Lucie Beaumont'}, {'id': 187, 'name': "I'datih Tio"}, {'id': 188, 'name': 'Berial Blackrose'}, {'id': 189, 'name': 'Arumy Shirai'}, {'id': 190, 'name': 'Luxie Hart'}, {'id': 191, 'name': ''}, {'id': 192, 'name': 'Asteon Vaerzel'}, {'id': 193, 'name': 'Droknar Maverlis'}, {'id': 194, 'name': 'Bibi Mbap'}, {'id': 195, 'name': 'Laerni Alina'}, {'id': 196, 'name': 'Laerni Alina'}, {'id': 197, 'name': 'Tori Rivers'}, {'id': 198, 'name': 'Vindur Surana'}, {'id': 199, 'name': 'Arika Chihoko'}, {'id': 200, 'name': 'Blue Hiei'}, {'id': 201, 'name': 'Blue Hiei'}, {'id': 202, 'name': 'Tsunderelf Xae'}, {'id': 203, 'name': 'Lilipo Lilimo'}, {'id': 204, 'name': 'Asteon Vaerzel'}, {'id': 205, 'name': "Celica Anthie'se"}, {'id': 206, 'name': 'Nireza Adrona'}, {'id': 207, 'name': 'Strawberry Icecream'}, {'id': 208, 'name': 'Leah Tribal'}, {'id': 209, 'name': 'Saeri Imaen'}, {'id': 210, 'name': 'Nireza Adrona'}, {'id': 211, 'name': 'Felix Armstrong'}, {'id': 212, 'name': 'Saffran Saeunn'}, {'id': 213, 'name': 'Neo Sanguine'}, {'id': 214, 'name': 'Shuz Ardor'}, {'id': 215, 'name': 'Olivia Ambrosia'}, {'id': 216, 'name': 'Amplified Mayhem'}, {'id': 217, 'name': 'Soul Borger'}, {'id': 218, 'name': 'Carbuncle'}, {'id': 219, 'name': 'Demi-Bahamut'}, {'id': 220, 'name': 'Ifrit-Egi'}, {'id': 221, 'name': 'Garuda-Egi'}, {'id': 222, 'name': 'Titan-Egi'}, {'id': 223, 'name': 'Phoenix'}]}, 'startTime': 1718134438936, 'fights': [{'name': 'Bahamut Prime', 'kill': False, 'lastPhase': 3, 'bossPercentage': 62.1, 'friendlyPlayers': [10, 9, 8, 7, 6, 5, 4, 3, 1], 'encounterID': 1060}, {'name': 'Bahamut Prime', 'kill': False, 'lastPhase': 1, 'bossPercentage': 4.82, 'friendlyPlayers': [10, 9, 8, 7, 6, 5, 4, 3, 1], 'encounterID': 1060}, {'name': 'Bahamut Prime', 'kill': False, 'lastPhase': 3, 'bossPercentage': 59.46, 'friendlyPlayers': [10, 9, 8, 7, 6, 5, 4, 3, 1], 'encounterID': 1060}, {'name': 'Bahamut Prime', 'kill': False, 'lastPhase': 4, 'bossPercentage': 30.77, 'friendlyPlayers': [10, 9, 8, 7, 6, 5, 4, 3, 1], 'encounterID': 1060}, {'name': 'Bahamut Prime', 'kill': False, 'lastPhase': 2, 'bossPercentage': 21.22, 'friendlyPlayers': [10, 9, 8, 7, 6, 5, 4, 3, 1], 'encounterID': 1060}, {'name': 'Bahamut Prime', 'kill': False, 'lastPhase': 1, 'bossPercentage': 81.31, 'friendlyPlayers': [10, 9, 8, 7, 6, 5, 4, 3, 1], 'encounterID': 1060}, {'name': 'Bahamut Prime', 'kill': False, 'lastPhase': 3, 'bossPercentage': 52.02, 'friendlyPlayers': [10, 9, 8, 7, 6, 5, 4, 3, 1], 'encounterID': 1060}, {'name': 'Bahamut Prime', 'kill': False, 'lastPhase': 2, 'bossPercentage': 0.01, 'friendlyPlayers': [10, 217, 216, 8, 215, 6, 5, 4, 3], 'encounterID': 1060}, {'name': 'Bahamut Prime', 'kill': False, 'lastPhase': 3, 'bossPercentage': 50.55, 'friendlyPlayers': [10, 217, 216, 8, 215, 6, 5, 4, 3], 'encounterID': 1060}, {'name': 'Bahamut Prime', 'kill': False, 'lastPhase': 4, 'bossPercentage': 52.46, 'friendlyPlayers': [27, 10, 217, 216, 8, 215, 6, 5, 4, 3], 'encounterID': 1060}, {'name': 'Bahamut Prime', 'kill': False, 'lastPhase': 3, 'bossPercentage': 59.82, 'friendlyPlayers': [10, 217, 216, 8, 215, 6, 5, 4, 3], 'encounterID': 1060}, {'name': 'Bahamut Prime', 'kill': False, 'lastPhase': 5, 'bossPercentage': 8.65, 'friendlyPlayers': [27, 10, 217, 216, 8, 215, 6, 5, 4, 3], 'encounterID': 1060}, {'name': 'Bahamut Prime', 'kill': False, 'lastPhase': 2, 'bossPercentage': 0.01, 'friendlyPlayers': [10, 217, 216, 8, 215, 6, 5, 4, 3], 'encounterID': 1060}, {'name': 'Bahamut Prime', 'kill': False, 'lastPhase': 3, 'bossPercentage': 53.76, 'friendlyPlayers': [10, 217, 216, 8, 215, 6, 5, 4, 3], 'encounterID': 1060}]}}}}
"""
mockUltReport = ast.literal_eval(ultString)
extremeString = """
{'data': {'reportData': {'report': {'masterData': {'actors': [{'id': -1, 'name': 'Environment'}, {'id': 1, 'name': 'Zeromus'}, {'id': 2, 'name': "Idol Yenn'akane"}, {'id': 3, 'name': 'Zeromus'}, {'id': 4, 'name': 'Kehlow Kehlow'}, {'id': 5, 'name': 'Vindriana Hyborn'}, {'id': 6, 'name': 'Automaton Queen'}, {'id': 7, 'name': 'Cymry Orpheum'}, {'id': 8, 'name': 'Sharisper Knoll'}, {'id': 9, 'name': 'Kasumi Miyumi'}, {'id': 10, 'name': 'Vaixa Sunday'}, {'id': 11, 'name': 'Andriel Rahz'}, {'id': 12, 'name': 'Demi-Bahamut'}, {'id': 13, 'name': 'Multiple Players'}, {'id': 14, 'name': 'Carbuncle'}, {'id': 15, 'name': 'Topaz Titan'}, {'id': 16, 'name': 'Emerald Garuda'}, {'id': 17, 'name': 'Multiple Enemies'}, {'id': 18, 'name': 'Comet'}, {'id': 19, 'name': 'Ruby Ifrit'}, {'id': 20, 'name': 'liturgic bell'}, {'id': 21, 'name': 'Demi-Phoenix'}, {'id': 22, 'name': 'toxic bubble'}, {'id': 23, 'name': ''}, {'id': 24, 'name': 'Astraphel Starweaver'}, {'id': 25, 'name': 'Virlomi Devi'}, {'id': 26, 'name': 'Doggo Botto'}, {'id': 27, 'name': 'Marishi Bukiko'}, {'id': 28, 'name': 'Yrys Ram-bou'}, {'id': 29, 'name': 'Brynjar Ragnarok'}, {'id': 30, 'name': "Ta'tzuyuh Nunh"}, {'id': 31, 'name': 'Edsuu Highwind'}, {'id': 32, 'name': 'Alastor Bloodwing'}, {'id': 33, 'name': 'Nergui Dataq'}, {'id': 34, 'name': 'Aster Crunchwrap'}, {'id': 35, 'name': 'Flow Haymacker'}, {'id': 36, 'name': 'Saya Minatsuki'}, {'id': 37, 'name': "V'dam Thel"}, {'id': 38, 'name': 'Aela Rin'}, {'id': 39, 'name': "Ta'tzuyuh Nunh"}, {'id': 40, 'name': 'Dio Dedoldia'}, {'id': 41, 'name': 'Spacierslia Milynes'}, {'id': 42, 'name': ''}, {'id': 43, 'name': 'Lilyana Archer'}, {'id': 44, 'name': 'Indignation Judgement'}, {'id': 45, 'name': 'Indignation Judgement'}, {'id': 46, 'name': 'Yo Yi'}, {'id': 47, 'name': 'Soulvanya Solstice'}, {'id': 48, 'name': 'Yo Yi'}, {'id': 49, 'name': "Avathorn Renar'us"}, {'id': 50, 'name': "Avathorn Renar'us"}, {'id': 51, 'name': 'Hex Vitale'}, {'id': 52, 'name': 'Virlomi Devi'}, {'id': 53, 'name': 'Kazan Kaujin'}, {'id': 54, 'name': 'Ellie Mavus'}, {'id': 55, 'name': 'Cornelius Fortemlius'}, {'id': 56, 'name': 'Retro Icy'}, {'id': 57, 'name': 'Vigil Strayed'}, {'id': 58, 'name': 'Yo Yi'}, {'id': 59, 'name': 'Laureine Maknaryden'}, {'id': 60, 'name': 'Jaenelle Chaosborne'}, {'id': 61, 'name': 'Zaeluer Med'}, {'id': 62, 'name': 'Lorilae Karafrost'}, {'id': 63, 'name': 'Hana Arborea'}, {'id': 64, 'name': 'Ellie Mavus'}, {'id': 65, 'name': 'Story Bear'}, {'id': 66, 'name': 'Maple Pug'}, {'id': 67, 'name': "Elsie Xan'el"}, {'id': 68, 'name': 'Katherine Cactuar'}, {'id': 69, 'name': 'Mahogany Chaise'}, {'id': 70, 'name': 'Sakura Tohsaka'}, {'id': 71, 'name': 'Kinanna Lafleur'}, {'id': 72, 'name': 'Dante Torobolino'}, {'id': 73, 'name': 'Eistera Kha'}, {'id': 74, 'name': 'Skylar Starmore'}, {'id': 75, 'name': 'Eos'}, {'id': 76, 'name': 'Shilvara Ara'}, {'id': 77, 'name': 'Irenia Selen'}, {'id': 78, 'name': 'Sir Bluvins'}, {'id': 79, 'name': 'Layla Egneel'}, {'id': 80, 'name': 'Eistera Kha'}, {'id': 81, 'name': 'Sayaya Saya'}, {'id': 82, 'name': 'Sayaya Saya'}, {'id': 83, 'name': 'Yumishiori Rhul'}, {'id': 84, 'name': 'Rhandric Rhul'}, {'id': 85, 'name': 'Ricard Greywoode'}, {'id': 86, 'name': 'Nyxen Arklight'}, {'id': 87, 'name': 'Zukken Carapoto'}, {'id': 88, 'name': 'Joshua Hardin'}, {'id': 89, 'name': "Estellia Lu'naa"}, {'id': 90, 'name': 'Ruby Primrose'}, {'id': 91, 'name': 'Ciri Altera'}, {'id': 92, 'name': 'Rhotsyng Sterrkhansyn'}, {'id': 93, 'name': 'Aria Wesker'}, {'id': 94, 'name': 'Avos Omega'}, {'id': 95, 'name': 'Automaton Queen'}, {'id': 96, 'name': 'Effexor Soma'}, {'id': 97, 'name': 'Lulu Pillow'}, {'id': 98, 'name': 'Ramu Ne'}, {'id': 99, 'name': 'Ramu Ne'}, {'id': 100, 'name': 'Chana Kaellindra'}, {'id': 101, 'name': 'Deliru Violente'}, {'id': 102, 'name': 'Virlomi Devi'}, {'id': 103, 'name': 'Silmara Yalagch'}, {'id': 104, 'name': 'Elder Knief'}, {'id': 105, 'name': 'Ivy Aesir'}, {'id': 106, 'name': 'Ivy Aesir'}, {'id': 107, 'name': 'Gojira Cole'}, {'id': 108, 'name': 'Nothoughts Headempty'}, {'id': 109, 'name': 'Still Helm'}, {'id': 110, 'name': 'Beatrix Rysto'}, {'id': 111, 'name': 'Skylar Starmore'}, {'id': 112, 'name': 'Wolf Nightkeeper'}, {'id': 113, 'name': ''}, {'id': 114, 'name': 'Ruby Miller'}, {'id': 115, 'name': 'Cyrus Miller'}, {'id': 116, 'name': 'Virlomi Devi'}, {'id': 117, 'name': "Kuldana Sin'del"}, {'id': 118, 'name': 'Ruby Miller'}, {'id': 119, 'name': 'Kei Miki'}, {'id': 120, 'name': 'Yoshi Rio'}, {'id': 121, 'name': ''}, {'id': 122, 'name': 'Malkodu Morswind'}, {'id': 123, 'name': 'Bobby Dank'}, {'id': 124, 'name': 'Nothoughts Headempty'}, {'id': 125, 'name': 'Lady Zendella'}, {'id': 126, 'name': 'Nothoughts Headempty'}, {'id': 127, 'name': 'Rhoegar Smith'}, {'id': 128, 'name': 'Nothoughts Headempty'}, {'id': 129, 'name': 'Poki Malaka'}, {'id': 130, 'name': 'Virlomi Devi'}, {'id': 131, 'name': "V'seji Noiyv"}, {'id': 132, 'name': 'Toga Michiru'}, {'id': 133, 'name': 'Dogi Butz'}, {'id': 134, 'name': 'Ahri Lockehearte'}, {'id': 135, 'name': 'Virlomi Devi'}, {'id': 136, 'name': 'Tenebe Hash'}, {'id': 137, 'name': 'Kanna Shai'}, {'id': 138, 'name': 'Akuma Shogun'}, {'id': 139, 'name': 'Nagi Thaantos'}, {'id': 140, 'name': "G'ihpsy Claihr"}, {'id': 141, 'name': 'Lady Emeria'}, {'id': 142, 'name': 'Lady Emeria'}, {'id': 143, 'name': 'William Wildlife'}, {'id': 144, 'name': 'Chicken Cordon-bleu'}, {'id': 145, 'name': 'Cynthia Fraldarius'}, {'id': 146, 'name': 'Dreylin Dreyliacci'}, {'id': 147, 'name': 'Chikaga Kigami'}, {'id': 148, 'name': 'Poki Malaka'}, {'id': 149, 'name': 'Lunaqua Purneko'}, {'id': 150, 'name': 'Yummura Gooms'}, {'id': 151, 'name': 'Icarus Idy'}, {'id': 152, 'name': 'Suki Nyannyan'}, {'id': 153, 'name': 'Mog Knight'}, {'id': 154, 'name': 'Meru Meru'}, {'id': 155, 'name': 'Emerald Carbuncle'}, {'id': 156, 'name': 'Demi-Bahamut'}, {'id': 157, 'name': 'Esteem'}, {'id': 158, 'name': 'Emerald Garuda'}, {'id': 159, 'name': 'Topaz Titan'}, {'id': 160, 'name': 'Ruby Ifrit'}, {'id': 161, 'name': 'liturgic bell'}, {'id': 162, 'name': 'Demi-Phoenix'}, {'id': 163, 'name': ''}, {'id': 164, 'name': 'Limit Break'}, {'id': 165, 'name': 'Amaterasu Tsukuyomi'}, {'id': 166, 'name': 'Silvie Bloodmoon'}, {'id': 167, 'name': 'Alistarn Chromwell'}, {'id': 168, 'name': 'Ivy Aesir'}, {'id': 169, 'name': 'Kasumi Miyumi'}, {'id': 170, 'name': 'Kasumi Miyumi'}, {'id': 171, 'name': 'Nay Min'}, {'id': 172, 'name': 'Zash Alamel'}, {'id': 173, 'name': "Jafar A'driek"}, {'id': 174, 'name': "Jafar A'driek"}, {'id': 175, 'name': 'Talia Avicia'}, {'id': 176, 'name': 'Wind Chime'}, {'id': 177, 'name': 'Jack Myste'}, {'id': 178, 'name': "Kuu'min Rider"}, {'id': 179, 'name': "Kuu'min Rider"}, {'id': 180, 'name': 'Nay Min'}, {'id': 181, 'name': 'Cosmic Chan'}, {'id': 182, 'name': 'Lucky Melancholy'}, {'id': 183, 'name': 'Nergui Dataq'}, {'id': 184, 'name': 'Jo Moral'}, {'id': 185, 'name': 'Ivy Aesir'}, {'id': 186, 'name': 'Ragnarok Doombringer'}, {'id': 187, 'name': 'Yuumi Yuu'}, {'id': 188, 'name': ''}, {'id': 189, 'name': 'Lionnet Jantell'}, {'id': 190, 'name': ''}, {'id': 191, 'name': 'Dovah Wolfsire'}, {'id': 192, 'name': 'Tabu Rasa'}, {'id': 193, 'name': 'Demi-Bahamut'}, {'id': 194, 'name': 'bunshin'}, {'id': 195, 'name': 'Ruby Ifrit'}, {'id': 196, 'name': 'Topaz Titan'}, {'id': 197, 'name': 'Carbuncle'}, {'id': 198, 'name': 'Emerald Garuda'}, {'id': 199, 'name': 'Demi-Phoenix'}, {'id': 200, 'name': 'liturgic bell'}, {'id': 201, 'name': 'Neru Naru'}, {'id': 202, 'name': 'Ashia Hagane'}, {'id': 203, 'name': 'Fiona Collins'}, {'id': 204, 'name': 'Leifei Uchiha'}, {'id': 205, 'name': 'Sinashi Zamani'}, {'id': 206, 'name': 'Ardyn Lucis-caelum'}, {'id': 207, 'name': 'Aria Estelle'}, {'id': 208, 'name': 'Unagi Box'}, {'id': 209, 'name': "E'min Farshaw"}, {'id': 210, 'name': 'Chem Saint'}, {'id': 211, 'name': "Miku De'blanche"}, {'id': 212, 'name': 'liturgic bell'}, {'id': 213, 'name': 'Khulan Sagahl'}, {'id': 214, 'name': 'Cake Biscuits'}, {'id': 215, 'name': ''}, {'id': 216, 'name': "E'lias Doomclaw"}, {'id': 217, 'name': 'Elyse Silvermoon'}, {'id': 218, 'name': 'Alyce Hunter'}, {'id': 219, 'name': 'Trash Kiriguya'}, {'id': 220, 'name': 'Zephyr Daze'}, {'id': 221, 'name': 'Ryllia Lyehga'}, {'id': 222, 'name': 'Genevieve Austori'}, {'id': 223, 'name': "Lil' Feet"}, {'id': 224, 'name': 'Arun Sylbalar'}, {'id': 225, 'name': 'Trenchcoat Raccoons'}, {'id': 226, 'name': 'Sverna Moritik'}, {'id': 227, 'name': 'Red Strider'}, {'id': 228, 'name': 'Lokk Miura'}, {'id': 229, 'name': 'Valerie Corvus'}, {'id': 230, 'name': 'Revani Pavlova'}, {'id': 231, 'name': 'Hulk Anator'}, {'id': 232, 'name': 'Nay Min'}, {'id': 233, 'name': 'Penelope Illuma'}, {'id': 234, 'name': 'Rin Hozuki'}, {'id': 235, 'name': 'Aliria Lillian'}, {'id': 236, 'name': 'Pitelski Highwind'}, {'id': 237, 'name': 'Lucilius Knight'}, {'id': 238, 'name': 'Krile Baldesion'}, {'id': 239, 'name': 'Billos Billos'}, {'id': 240, 'name': 'Moon Dawn'}, {'id': 241, 'name': 'Quantum Argentum'}, {'id': 242, 'name': 'Ruby Primrose'}, {'id': 243, 'name': 'Izlude Amaterasu'}, {'id': 244, 'name': 'Tabu Rasa'}, {'id': 245, 'name': 'Curtis White'}, {'id': 246, 'name': 'Shinobu Hoshizaki'}, {'id': 247, 'name': 'Automaton Queen'}, {'id': 248, 'name': 'liturgic bell'}, {'id': 249, 'name': 'Sikera Usum'}, {'id': 250, 'name': 'Odra Drage'}, {'id': 251, 'name': 'Rividelia Shenwood'}, {'id': 252, 'name': 'Altara Ghealdan'}, {'id': 253, 'name': 'Ranmae Valere'}, {'id': 254, 'name': 'Aru Starr'}, {'id': 255, 'name': "F'reya Highwind"}, {'id': 256, 'name': 'Koya Kasumi'}, {'id': 257, 'name': 'Ren Lunyasch'}, {'id': 258, 'name': 'Strawberry Jelly'}, {'id': 259, 'name': 'Wawa Bee'}, {'id': 260, 'name': 'Madusha Silva'}, {'id': 261, 'name': "K'ai Sansen"}, {'id': 262, 'name': 'Lunatique Chase'}, {'id': 263, 'name': 'Jassu Jirome'}, {'id': 264, 'name': 'Sir Alexandr'}, {'id': 265, 'name': "K'ai Sansen"}, {'id': 266, 'name': 'Efren Gharl'}, {'id': 267, 'name': 'Loona Dreamcatcher'}, {'id': 268, 'name': 'Madusha Silva'}, {'id': 269, 'name': "K'ai Sansen"}, {'id': 270, 'name': 'Kali Amony'}, {'id': 271, 'name': 'Kat Tatiana'}, {'id': 272, 'name': 'Tabu Rasa'}, {'id': 273, 'name': 'Torch Qt'}, {'id': 274, 'name': 'Esteem'}, {'id': 275, 'name': "M'aique Delieur"}, {'id': 276, 'name': 'Kather Laqi'}, {'id': 277, 'name': 'Altara Ghealdan'}, {'id': 278, 'name': 'Altara Ghealdan'}, {'id': 279, 'name': 'Altara Ghealdan'}, {'id': 280, 'name': 'Aaz Galliarch'}, {'id': 281, 'name': 'Aaz Galliarch'}, {'id': 282, 'name': 'Aaz Galliarch'}, {'id': 283, 'name': 'Solaire Arkwright'}, {'id': 284, 'name': 'Curtis White'}, {'id': 285, 'name': 'Ka Rate'}, {'id': 286, 'name': 'Carbuncle'}, {'id': 287, 'name': 'Demi-Bahamut'}, {'id': 288, 'name': 'Topaz Titan'}, {'id': 289, 'name': 'Emerald Garuda'}, {'id': 290, 'name': 'Ruby Ifrit'}, {'id': 291, 'name': 'Demi-Phoenix'}, {'id': 292, 'name': "N'irnaen Ives"}, {'id': 293, 'name': 'Raikhal Elysium'}, {'id': 294, 'name': 'Skorpion Scorpio'}, {'id': 295, 'name': 'Anubis Constantine'}, {'id': 296, 'name': 'Silvie Bloodmoon'}, {'id': 297, 'name': 'Logan Cooper'}, {'id': 298, 'name': 'Mocha Caramel'}, {'id': 299, 'name': 'Puru Xiv'}, {'id': 300, 'name': 'Kaia Teneiv'}]}, 'startTime': 1696566161511, 'fights': [{'name': 'Zeromus', 'id': 1, 'kill': False, 'lastPhase': 0, 'bossPercentage': 61.24, 'fightPercentage': 61.24, 'difficulty': 100, 'friendlyPlayers': [13, 11, 10, 9, 8, 7, 5, 4, 2], 'encounterID': 1070}, {'name': 'Zeromus', 'id': 2, 'kill': False, 'lastPhase': 0, 'bossPercentage': 63.85, 'fightPercentage': 63.85, 'difficulty': 100, 'friendlyPlayers': [13, 11, 10, 9, 8, 7, 5, 4, 2], 'encounterID': 1070}, {'name': 'Zeromus', 'id': 3, 'kill': False, 'lastPhase': 0, 'bossPercentage': 54.34, 'fightPercentage': 54.34, 'difficulty': 100, 'friendlyPlayers': [13, 11, 10, 9, 8, 7, 5, 4, 2], 'encounterID': 1070}, {'name': 'Zeromus', 'id': 4, 'kill': False, 'lastPhase': 0, 'bossPercentage': 57.92, 'fightPercentage': 57.92, 'difficulty': 100, 'friendlyPlayers': [94, 93, 77, 13, 92, 91, 90, 89, 9], 'encounterID': 1070}, {'name': 'Zeromus', 'id': 5, 'kill': False, 'lastPhase': 0, 'bossPercentage': 63.4, 'fightPercentage': 63.4, 'difficulty': 100, 'friendlyPlayers': [94, 93, 77, 13, 92, 91, 90, 89, 9], 'encounterID': 1070}, {'name': 'Zeromus', 'id': 6, 'kill': False, 'lastPhase': 0, 'bossPercentage': 63.09, 'fightPercentage': 63.09, 'difficulty': 100, 'friendlyPlayers': [94, 93, 77, 13, 92, 91, 90, 89, 9], 'encounterID': 1070}, {'name': 'Zeromus', 'id': 7, 'kill': False, 'lastPhase': 0, 'bossPercentage': 61.83, 'fightPercentage': 61.83, 'difficulty': 100, 'friendlyPlayers': [94, 93, 77, 13, 92, 91, 90, 9, 89], 'encounterID': 1070}, {'name': 'Zeromus', 'id': 8, 'kill': False, 'lastPhase': 0, 'bossPercentage': 55.02, 'fightPercentage': 55.02, 'difficulty': 100, 'friendlyPlayers': [13, 90, 154, 89, 153, 9, 152, 151, 150], 'encounterID': 1070}, {'name': 'Zeromus', 'id': 9, 'kill': False, 'lastPhase': 0, 'bossPercentage': 61.83, 'fightPercentage': 61.83, 'difficulty': 100, 'friendlyPlayers': [13, 154, 90, 153, 89, 9, 152, 151, 150], 'encounterID': 1070}, {'name': 'Zeromus', 'id': 10, 'kill': True, 'lastPhase': 0, 'bossPercentage': 0.01, 'fightPercentage': 0.01, 'difficulty': 100, 'friendlyPlayers': [13, 90, 154, 89, 153, 9, 152, 151, 150, 164], 'encounterID': 1070}, {'name': 'Zeromus', 'id': 11, 'kill': False, 'lastPhase': 0, 'bossPercentage': 14.08, 'fightPercentage': 14.08, 'difficulty': 100, 'friendlyPlayers': [191, 189, 13, 187, 186, 90, 89, 9, 192], 'encounterID': 1070}, {'name': 'Zeromus', 'id': 12, 'kill': False, 'lastPhase': 0, 'bossPercentage': 61.15, 'fightPercentage': 61.15, 'difficulty': 100, 'friendlyPlayers': [189, 13, 187, 186, 90, 89, 9, 211, 192], 'encounterID': 1070}, {'name': 'Zeromus', 'id': 13, 'kill': False, 'lastPhase': 0, 'bossPercentage': 40.58, 'fightPercentage': 40.58, 'difficulty': 100, 'friendlyPlayers': [189, 13, 187, 186, 90, 9, 89, 211, 192], 'encounterID': 1070}, {'name': 'Zeromus', 'id': 14, 'kill': False, 'lastPhase': 0, 'bossPercentage': 41.4, 'fightPercentage': 41.4, 'difficulty': 100, 'friendlyPlayers': [189, 13, 187, 186, 90, 89, 9, 164, 211, 192], 'encounterID': 1070}, {'name': 'Zeromus', 'id': 15, 'kill': True, 'lastPhase': 0, 'bossPercentage': 0.01, 'fightPercentage': 0.01, 'difficulty': 100, 'friendlyPlayers': [13, 89, 9, 246, 245, 244, 164, 243, 242, 241], 'encounterID': 1070}, {'name': 'Zeromus', 'id': 16, 'kill': True, 'lastPhase': 0, 'bossPercentage': 0.01, 'fightPercentage': 0.01, 'difficulty': 100, 'friendlyPlayers': [271, 13, 90, 169, 89, 245, 243, 273, 272], 'encounterID': 1070}, {'name': 'Zeromus', 'id': 17, 'kill': True, 'lastPhase': 0, 'bossPercentage': 0.01, 'fightPercentage': 0.01, 'difficulty': 100, 'friendlyPlayers': [271, 285, 13, 284, 90, 89, 169, 164, 243, 273], 'encounterID': 1070}, {'name': 'Zeromus', 'id': 18, 'kill': True, 'lastPhase': 0, 'bossPercentage': 0.01, 'fightPercentage': 0.01, 'difficulty': 100, 'friendlyPlayers': [271, 285, 13, 284, 300, 90, 169, 89, 164, 243], 'encounterID': 1070}], 'rankings': {'data': [{'fightID': 10, 'partition': 7, 'zone': 55, 'encounter': {'id': 1070, 'name': 'Zeromus'}, 'difficulty': 100, 'size': 8, 'kill': 1, 'duration': 620324, 'bracketData': 6.5, 'deaths': 15, 'damageTakenExcludingTanks': 11983867, 'roles': {'tanks': {'name': 'Tanks', 'characters': [{'id': 17302457, 'name': 'Icarus Idy', 'server': {'id': 16, 'name': 'Lamia', 'region': 'NA'}, 'class': 'DarkKnight', 'spec': '', 'amount': 6218.3456431577, 'bracketData': 6.5, 'bracket': 6, 'rank': '~13981', 'best': '~13981', 'totalParses': 14564, 'bracketPercent': 4, 'rankPercent': 4}, {'id': 12440298, 'name': 'Yummura Gooms', 'server': {'id': 22, 'name': 'Siren', 'region': 'NA'}, 'class': 'Warrior', 'spec': '', 'amount': 8747.2320536807, 'bracketData': 6.5, 'bracket': 6, 'rank': '~4391', 'best': '-', 'totalParses': 20911, 'bracketPercent': 79, 'rankPercent': 79}, {'id': 17302457, 'name': 'Icarus Idy', 'class': 'DarkKnight', 'spec': '', 'id_2': 12440298, 'name_2': 'Yummura Gooms', 'class_2': 'Warrior', 'spec_2': '', 'amount': 14965.6, 'bracketData': 6.5, 'bracket': 6, 'rank': '~12986', 'best': '~12986', 'totalParses': 16439, 'bracketPercent': 21, 'rankPercent': 21}]}, 'healers': {'name': 'Healers', 'characters': [{'id': 12375876, 'name': 'Suki Nyannyan', 'server': {'id': 22, 'name': 'Siren', 'region': 'NA'}, 'class': 'WhiteMage', 'spec': '', 'amount': 3244.740391989, 'bracketData': 6.5, 'bracket': 6, 'rank': '~22442', 'best': '-', 'totalParses': 23378, 'bracketPercent': 4, 'rankPercent': 4}, {'id': 19364330, 'name': 'Kasumi Miyumi', 'server': {'id': 23, 'name': 'Ultros', 'region': 'NA'}, 'class': 'Sage', 'spec': '', 'amount': 4468.0525752065, 'bracketData': 6.5, 'bracket': 6, 'rank': '~18569', 'best': '-', 'totalParses': 22107, 'bracketPercent': 16, 'rankPercent': 16}, {'id': 12375876, 'name': 'Suki Nyannyan', 'class': 'WhiteMage', 'spec': '', 'id_2': 19364330, 'name_2': 'Kasumi Miyumi', 'class_2': 'Sage', 'spec_2': '', 'amount': 7712.79, 'bracketData': 6.5, 'bracket': 6, 'rank': '~46258', 'best': '~46258', 'totalParses': 48186, 'bracketPercent': 4, 'rankPercent': 4}]}, 'dps': {'name': 'Damage Dealers', 'characters': [{'id': 19387584, 'name': 'Meru Meru', 'server': {'id': 20, 'name': 'Midgardsormr', 'region': 'NA'}, 'class': 'Dragoon', 'spec': '', 'amount': 10557.053652621, 'bracketData': 6.5, 'bracket': 6, 'rank': '~8593', 'best': '-', 'totalParses': 10480, 'bracketPercent': 18, 'rankPercent': 18}, {'id': 18936830, 'name': 'Ruby Primrose', 'server': {'id': 17, 'name': 'Leviathan', 'region': 'NA'}, 'class': 'Machinist', 'spec': '', 'amount': 11097.136279755, 'bracketData': 6.5, 'bracket': 6, 'rank': '~8837', 'best': '-', 'totalParses': 13190, 'bracketPercent': 33, 'rankPercent': 33}, {'id': 19616396, 'name': 'Mog Knight', 'server': {'id': 20, 'name': 'Midgardsormr', 'region': 'NA'}, 'class': 'Summoner', 'spec': '', 'amount': 7792.0781100647, 'bracketData': 6.5, 'bracket': 6, 'rank': '~18547', 'best': '-', 'totalParses': 19121, 'bracketPercent': 3, 'rankPercent': 3}, {'id': 18830499, 'name': "Estellia Lu'naa", 'server': {'id': 23, 'name': 'Ultros', 'region': 'NA'}, 'class': 'Reaper', 'spec': '', 'amount': 13129.193162033, 'bracketData': 6.5, 'bracket': 6, 'rank': '~3915', 'best': '-', 'totalParses': 16316, 'bracketPercent': 76, 'rankPercent': 76}]}}, 'bracket': 6, 'reportsBlacklistForCharacters': [], 'speed': {'rank': '~1079', 'best': '~1079', 'totalParses': 1241, 'rankPercent': 13}, 'execution': {'rank': '~1116', 'best': '~1116', 'totalParses': 1241, 'rankPercent': 10}}, {'fightID': 15, 'partition': 7, 'zone': 55, 'encounter': {'id': 1070, 'name': 'Zeromus'}, 'difficulty': 100, 'size': 8, 'kill': 1, 'duration': 562635, 'bracketData': 6.5, 'deaths': 12, 'damageTakenExcludingTanks': 8668532, 'roles': {'tanks': {'name': 'Tanks', 'characters': [{'id': 18936830, 'name': 'Ruby Primrose', 'server': {'id': 17, 'name': 'Leviathan', 'region': 'NA'}, 'class': 'Paladin', 'spec': '', 'amount': 8897.565001211, 'bracketData': 6.5, 'bracket': 6, 'rank': '~1888', 'best': '-', 'totalParses': 18882, 'bracketPercent': 90, 'rankPercent': 90}, {'id': 16644208, 'name': 'Tabu Rasa', 'server': {'id': 23, 'name': 'Ultros', 'region': 'NA'}, 'class': 'Gunbreaker', 'spec': '', 'amount': 8710.2738677081, 'bracketData': 6.5, 'bracket': 6, 'rank': '~3918', 'best': '-', 'totalParses': 15071, 'bracketPercent': 74, 'rankPercent': 74}, {'id': 18936830, 'name': 'Ruby Primrose', 'class': 'Paladin', 'spec': '', 'id_2': 16644208, 'name_2': 'Tabu Rasa', 'class_2': 'Gunbreaker', 'spec_2': '', 'amount': 17607.8, 'bracketData': 6.5, 'bracket': 6, 'rank': '~1006', 'best': '~1006', 'totalParses': 14380, 'bracketPercent': 93, 'rankPercent': 93}]}, 'healers': {'name': 'Healers', 'characters': [{'id': 14164511, 'name': 'Izlude Amaterasu', 'server': {'id': 3, 'name': 'Behemoth', 'region': 'NA'}, 'class': 'WhiteMage', 'spec': '', 'amount': 4009.8323631185, 'bracketData': 6.5, 'bracket': 6, 'rank': '~20806', 'best': '-', 'totalParses': 23378, 'bracketPercent': 11, 'rankPercent': 11}, {'id': 19364330, 'name': 'Kasumi Miyumi', 'server': {'id': 23, 'name': 'Ultros', 'region': 'NA'}, 'class': 'Sage', 'spec': '', 'amount': 4164.9539432409, 'bracketData': 6.5, 'bracket': 6, 'rank': '~19454', 'best': '-', 'totalParses': 22107, 'bracketPercent': 12, 'rankPercent': 12}, {'id': 14164511, 'name': 'Izlude Amaterasu', 'class': 'WhiteMage', 'spec': '', 'id_2': 19364330, 'name_2': 'Kasumi Miyumi', 'class_2': 'Sage', 'spec_2': '', 'amount': 8174.79, 'bracketData': 6.5, 'bracket': 6, 'rank': '~44812', 'best': '~44812', 'totalParses': 48186, 'bracketPercent': 7, 'rankPercent': 7}]}, 'dps': {'name': 'Damage Dealers', 'characters': [{'id': 19526373, 'name': 'Shinobu Hoshizaki', 'server': {'id': 12, 'name': 'Gilgamesh', 'region': 'NA'}, 'class': 'Dragoon', 'spec': '', 'amount': 11785.478320826, 'bracketData': 6.5, 'bracket': 6, 'rank': '~6288', 'best': '-', 'totalParses': 10480, 'bracketPercent': 40, 'rankPercent': 40}, {'id': 18435331, 'name': 'Quantum Argentum', 'server': {'id': 17, 'name': 'Leviathan', 'region': 'NA'}, 'class': 'Machinist', 'spec': '', 'amount': 11835.021556493, 'bracketData': 6.5, 'bracket': 6, 'rank': '~6199', 'best': '-', 'totalParses': 13190, 'bracketPercent': 53, 'rankPercent': 53}, {'id': 16996490, 'name': 'Curtis White', 'server': {'id': 14, 'name': 'Hyperion', 'region': 'NA'}, 'class': 'RedMage', 'spec': '', 'amount': 8759.5948889128, 'bracketData': 6.5, 'bracket': 6, 'rank': '~11503', 'best': '-', 'totalParses': 13072, 'bracketPercent': 12, 'rankPercent': 12}, {'id': 18830499, 'name': "Estellia Lu'naa", 'server': {'id': 23, 'name': 'Ultros', 'region': 'NA'}, 'class': 'Reaper', 'spec': '', 'amount': 13781.791153605, 'bracketData': 6.5, 'bracket': 6, 'rank': '~815', 'best': '-', 'totalParses': 16316, 'bracketPercent': 95, 'rankPercent': 95}]}}, 'bracket': 6, 'reportsBlacklistForCharacters': [], 'speed': {'rank': '~757', 'best': '~757', 'totalParses': 1241, 'rankPercent': 39}, 'execution': {'rank': '~1116', 'best': '~1116', 'totalParses': 1241, 'rankPercent': 10}}, {'fightID': 16, 'partition': 7, 'zone': 55, 'encounter': {'id': 1070, 'name': 'Zeromus'}, 'difficulty': 100, 'size': 8, 'kill': 1, 'duration': 534435, 'bracketData': 6.5, 'deaths': 4, 'damageTakenExcludingTanks': 7527326, 'roles': {'tanks': {'name': 'Tanks', 'characters': [{'id': 19364330, 'name': 'Kasumi Miyumi', 'server': {'id': 23, 'name': 'Ultros', 'region': 'NA'}, 'class': 'DarkKnight', 'spec': '', 'amount': 7581.9618024542, 'bracketData': 6.5, 'bracket': 6, 'rank': '~10049', 'best': '-', 'totalParses': 14564, 'bracketPercent': 31, 'rankPercent': 31}, {'id': 16644208, 'name': 'Tabu Rasa', 'server': {'id': 23, 'name': 'Ultros', 'region': 'NA'}, 'class': 'Paladin', 'spec': '', 'amount': 8549.3053567258, 'bracketData': 6.5, 'bracket': 6, 'rank': '~5286', 'best': '-', 'totalParses': 18882, 'bracketPercent': 72, 'rankPercent': 72}, {'id': 19364330, 'name': 'Kasumi Miyumi', 'class': 'DarkKnight', 'spec': '', 'id_2': 16644208, 'name_2': 'Tabu Rasa', 'class_2': 'Paladin', 'spec_2': '', 'amount': 16131.3, 'bracketData': 6.5, 'bracket': 6, 'rank': '~5643', 'best': '-', 'totalParses': 14852, 'bracketPercent': 62, 'rankPercent': 62}]}, 'healers': {'name': 'Healers', 'characters': [{'id': 14164511, 'name': 'Izlude Amaterasu', 'server': {'id': 3, 'name': 'Behemoth', 'region': 'NA'}, 'class': 'WhiteMage', 'spec': '', 'amount': 4926.6550503184, 'bracketData': 6.5, 'bracket': 6, 'rank': '~17065', 'best': '-', 'totalParses': 23378, 'bracketPercent': 27, 'rankPercent': 27}, {'id': 384059, 'name': 'Kat Tatiana', 'server': {'id': 2, 'name': 'Balmung', 'region': 'NA'}, 'class': 'Sage', 'spec': '', 'amount': 7914.8568014507, 'bracketData': 6.5, 'bracket': 6, 'rank': '~663', 'best': '-', 'totalParses': 22107, 'bracketPercent': 97, 'rankPercent': 97}, {'id': 14164511, 'name': 'Izlude Amaterasu', 'class': 'WhiteMage', 'spec': '', 'id_2': 384059, 'name_2': 'Kat Tatiana', 'class_2': 'Sage', 'spec_2': '', 'amount': 12841.5, 'bracketData': 6.5, 'bracket': 6, 'rank': '~11082', 'best': '-', 'totalParses': 48186, 'bracketPercent': 77, 'rankPercent': 77}]}, 'dps': {'name': 'Damage Dealers', 'characters': [{'id': 18936830, 'name': 'Ruby Primrose', 'server': {'id': 17, 'name': 'Leviathan', 'region': 'NA'}, 'class': 'Machinist', 'spec': '', 'amount': 10230.403495457, 'bracketData': 6.5, 'bracket': 6, 'rank': '~10947', 'best': '-', 'totalParses': 13190, 'bracketPercent': 17, 'rankPercent': 17}, {'id': 16996490, 'name': 'Curtis White', 'server': {'id': 14, 'name': 'Hyperion', 'region': 'NA'}, 'class': 'RedMage', 'spec': '', 'amount': 10469.940726118, 'bracketData': 6.5, 'bracket': 6, 'rank': '~8104', 'best': '-', 'totalParses': 13072, 'bracketPercent': 38, 'rankPercent': 38}, {'id': 18695415, 'name': 'Torch Qt', 'server': {'id': 20, 'name': 'Midgardsormr', 'region': 'NA'}, 'class': 'Samurai', 'spec': '', 'amount': 12620.264838605, 'bracketData': 6.5, 'bracket': 6, 'rank': '~6437', 'best': '-', 'totalParses': 14970, 'bracketPercent': 57, 'rankPercent': 57}, {'id': 18830499, 'name': "Estellia Lu'naa", 'server': {'id': 23, 'name': 'Ultros', 'region': 'NA'}, 'class': 'Reaper', 'spec': '', 'amount': 13447.368054499, 'bracketData': 6.5, 'bracket': 6, 'rank': '~2284', 'best': '-', 'totalParses': 16316, 'bracketPercent': 86, 'rankPercent': 86}]}}, 'bracket': 6, 'reportsBlacklistForCharacters': [], 'speed': {'rank': '~483', 'best': '~483', 'totalParses': 1241, 'rankPercent': 61}, 'execution': {'rank': '~682', 'best': '~682', 'totalParses': 1241, 'rankPercent': 45}}, {'fightID': 17, 'partition': 7, 'zone': 55, 'encounter': {'id': 1070, 'name': 'Zeromus'}, 'difficulty': 100, 'size': 8, 'kill': 1, 'duration': 560920, 'bracketData': 6.5, 'deaths': 11, 'damageTakenExcludingTanks': 11068871, 'roles': {'tanks': {'name': 'Tanks', 'characters': [{'id': 19364330, 'name': 'Kasumi Miyumi', 'server': {'id': 23, 'name': 'Ultros', 'region': 'NA'}, 'class': 'DarkKnight', 'spec': '', 'amount': 6732.7829318446, 'bracketData': 6.5, 'bracket': 6, 'rank': '~13107', 'best': '-', 'totalParses': 14564, 'bracketPercent': 10, 'rankPercent': 10}, {'id': 16996490, 'name': 'Curtis White', 'server': {'id': 14, 'name': 'Hyperion', 'region': 'NA'}, 'class': 'Warrior', 'spec': '', 'amount': 7414.9635737733, 'bracketData': 6.5, 'bracket': 6, 'rank': '~17565', 'best': '-', 'totalParses': 20911, 'bracketPercent': 16, 'rankPercent': 16}, {'id': 19364330, 'name': 'Kasumi Miyumi', 'class': 'DarkKnight', 'spec': '', 'id_2': 16996490, 'name_2': 'Curtis White', 'class_2': 'Warrior', 'spec_2': '', 'amount': 14147.7, 'bracketData': 6.5, 'bracket': 6, 'rank': '~14959', 'best': '-', 'totalParses': 16439, 'bracketPercent': 9, 'rankPercent': 9}]}, 'healers': {'name': 'Healers', 'characters': [{'id': 14164511, 'name': 'Izlude Amaterasu', 'server': {'id': 3, 'name': 'Behemoth', 'region': 'NA'}, 'class': 'WhiteMage', 'spec': '', 'amount': 4678.2040225017, 'bracketData': 6.5, 'bracket': 6, 'rank': '~18234', 'best': '-', 'totalParses': 23378, 'bracketPercent': 22, 'rankPercent': 22}, {'id': 384059, 'name': 'Kat Tatiana', 'server': {'id': 2, 'name': 'Balmung', 'region': 'NA'}, 'class': 'Sage', 'spec': '', 'amount': 6945.2328726112, 'bracketData': 6.5, 'bracket': 6, 'rank': '~4642', 'best': '-', 'totalParses': 22107, 'bracketPercent': 79, 'rankPercent': 79}, {'id': 14164511, 'name': 'Izlude Amaterasu', 'class': 'WhiteMage', 'spec': '', 'id_2': 384059, 'name_2': 'Kat Tatiana', 'class_2': 'Sage', 'spec_2': '', 'amount': 11623.4, 'bracketData': 6.5, 'bracket': 6, 'rank': '~21201', 'best': '-', 'totalParses': 48186, 'bracketPercent': 56, 'rankPercent': 56}]}, 'dps': {'name': 'Damage Dealers', 'characters': [{'id': 18936830, 'name': 'Ruby Primrose', 'server': {'id': 17, 'name': 'Leviathan', 'region': 'NA'}, 'class': 'Machinist', 'spec': '', 'amount': 9884.2540946442, 'bracketData': 6.5, 'bracket': 6, 'rank': '~11475', 'best': '-', 'totalParses': 13190, 'bracketPercent': 13, 'rankPercent': 13}, {'id': 15616395, 'name': 'Ka Rate', 'server': {'id': 16, 'name': 'Lamia', 'region': 'NA'}, 'class': 'Summoner', 'spec': '', 'amount': 11198.638165269, 'bracketData': 6.5, 'bracket': 6, 'rank': '~10707', 'best': '-', 'totalParses': 19121, 'bracketPercent': 44, 'rankPercent': 44}, {'id': 18695415, 'name': 'Torch Qt', 'server': {'id': 20, 'name': 'Midgardsormr', 'region': 'NA'}, 'class': 'Samurai', 'spec': '', 'amount': 11529.172970329, 'bracketData': 6.5, 'bracket': 6, 'rank': '~10778', 'best': '-', 'totalParses': 14970, 'bracketPercent': 28, 'rankPercent': 28}, {'id': 18830499, 'name': "Estellia Lu'naa", 'server': {'id': 23, 'name': 'Ultros', 'region': 'NA'}, 'class': 'Reaper', 'spec': '', 'amount': 13781.268590735, 'bracketData': 6.5, 'bracket': 6, 'rank': '~815', 'best': '-', 'totalParses': 16316, 'bracketPercent': 95, 'rankPercent': 95}]}}, 'bracket': 6, 'reportsBlacklistForCharacters': [], 'speed': {'rank': '~732', 'best': '~732', 'totalParses': 1241, 'rankPercent': 41}, 'execution': {'rank': '~1116', 'best': '~1116', 'totalParses': 1241, 'rankPercent': 10}}, {'fightID': 18, 'partition': 7, 'zone': 55, 'encounter': {'id': 1070, 'name': 'Zeromus'}, 'difficulty': 100, 'size': 8, 'kill': 1, 'duration': 511847, 'bracketData': 6.5, 'deaths': 3, 'damageTakenExcludingTanks': 8798619, 'roles': {'tanks': {'name': 'Tanks', 'characters': [{'id': 19364330, 'name': 'Kasumi Miyumi', 'server': {'id': 23, 'name': 'Ultros', 'region': 'NA'}, 'class': 'DarkKnight', 'spec': '', 'amount': 6206.8296625302, 'bracketData': 6.5, 'bracket': 6, 'rank': '~13981', 'best': '-', 'totalParses': 14564, 'bracketPercent': 4, 'rankPercent': 4}, {'id': 16996490, 'name': 'Curtis White', 'server': {'id': 14, 'name': 'Hyperion', 'region': 'NA'}, 'class': 'Warrior', 'spec': '', 'amount': 7686.3816541121, 'bracketData': 6.5, 'bracket': 6, 'rank': '~16101', 'best': '-', 'totalParses': 20911, 'bracketPercent': 23, 'rankPercent': 23}, {'id': 19364330, 'name': 'Kasumi Miyumi', 'class': 'DarkKnight', 'spec': '', 'id_2': 16996490, 'name_2': 'Curtis White', 'class_2': 'Warrior', 'spec_2': '', 'amount': 13893.2, 'bracketData': 6.5, 'bracket': 6, 'rank': '~15288', 'best': '-', 'totalParses': 16439, 'bracketPercent': 7, 'rankPercent': 7}]}, 'healers': {'name': 'Healers', 'characters': [{'id': 14164511, 'name': 'Izlude Amaterasu', 'server': {'id': 3, 'name': 'Behemoth', 'region': 'NA'}, 'class': 'WhiteMage', 'spec': '', 'amount': 4862.6084610124, 'bracketData': 6.5, 'bracket': 6, 'rank': '~17299', 'best': '-', 'totalParses': 23378, 'bracketPercent': 26, 'rankPercent': 26}, {'id': 384059, 'name': 'Kat Tatiana', 'server': {'id': 2, 'name': 'Balmung', 'region': 'NA'}, 'class': 'Sage', 'spec': '', 'amount': 7650.5461822167, 'bracketData': 6.5, 'bracket': 6, 'rank': '~1326', 'best': '-', 'totalParses': 22107, 'bracketPercent': 94, 'rankPercent': 94}, {'id': 14164511, 'name': 'Izlude Amaterasu', 'class': 'WhiteMage', 'spec': '', 'id_2': 384059, 'name_2': 'Kat Tatiana', 'class_2': 'Sage', 'spec_2': '', 'amount': 12513.2, 'bracketData': 6.5, 'bracket': 6, 'rank': '~13492', 'best': '-', 'totalParses': 48186, 'bracketPercent': 72, 'rankPercent': 72}]}, 'dps': {'name': 'Damage Dealers', 'characters': [{'id': 19001996, 'name': 'Kaia Teneiv', 'server': {'id': 116, 'name': 'Marilith', 'region': 'NA'}, 'class': 'Dragoon', 'spec': '', 'amount': 13762.364328385, 'bracketData': 6.5, 'bracket': 6, 'rank': '~419', 'best': '-', 'totalParses': 10480, 'bracketPercent': 96, 'rankPercent': 96}, {'id': 18936830, 'name': 'Ruby Primrose', 'server': {'id': 17, 'name': 'Leviathan', 'region': 'NA'}, 'class': 'Machinist', 'spec': '', 'amount': 12101.601440563, 'bracketData': 6.5, 'bracket': 6, 'rank': '~4880', 'best': '-', 'totalParses': 13190, 'bracketPercent': 63, 'rankPercent': 63}, {'id': 15616395, 'name': 'Ka Rate', 'server': {'id': 16, 'name': 'Lamia', 'region': 'NA'}, 'class': 'Summoner', 'spec': '', 'amount': 12132.806830978, 'bracketData': 6.5, 'bracket': 6, 'rank': '~5162', 'best': '-', 'totalParses': 19121, 'bracketPercent': 73, 'rankPercent': 73}, {'id': 18830499, 'name': "Estellia Lu'naa", 'server': {'id': 23, 'name': 'Ultros', 'region': 'NA'}, 'class': 'Reaper', 'spec': '', 'amount': 13743.965946041, 'bracketData': 6.5, 'bracket': 6, 'rank': '~978', 'best': '-', 'totalParses': 16316, 'bracketPercent': 94, 'rankPercent': 94}]}}, 'bracket': 6, 'reportsBlacklistForCharacters': [], 'speed': {'rank': '~260', 'best': '~260', 'totalParses': 1241, 'rankPercent': 79}, 'execution': {'rank': '~620', 'best': '~620', 'totalParses': 1241, 'rankPercent': 50}}]}}}}}
"""
mockExtremeReport = ast.literal_eval(extremeString)

class ReportDataError(Exception):
    """The received reportData is not correctly formatted or missing."""

def isFightUltimate(fight: dict) -> bool:
   """Returns whether a fight is an Ultimate."""
   return fight.get("lastPhase") > 0

def isFightSavage(fight: dict) -> bool:
   """Returns whether a fight is a Savage."""
   return fight.get("difficulty") == 101

def extractReportFields(reportData: dict) -> Tuple[List[object], str, List[object], List[object]]:
  """
  Extracts the list of actors, date, and list of fights from a report.
   
   Args:
    `reportData`: A dict representing a json object containing reportData.

  Returns:
    A tuple containing the list of actor objects, the date of the report in 
    "Month Day, Year" format, a list of fights, and a possibly empty list of 
    rankings.
  """
  flattenedReport = reportData.get("data").get("reportData").get("report")

  actorList = flattenedReport.get("masterData").get("actors")

  startTimeUNIX = flattenedReport.get("startTime") // 1000 #millisecond precision
  startTimeString = datetime.fromtimestamp(startTimeUNIX).strftime("%B %d, %Y")

  fightsList = flattenedReport.get("fights")

  rankingsList = flattenedReport.get("rankings").get("data")

  return actorList, startTimeString, fightsList, rankingsList

def simplifyRanking(ranking: dict) -> dict:
  """Convert a ranking object into a dictionary mapping fight ID to a list of parse tuples."""
  characterParseList = []
  for role in ranking["roles"].values():
     for player in role["characters"]:
        # Tanks and healers have a combined player field - this prunes that 
        if "name_2" in player: continue
        characterParseList.append((player["name"], player["rankPercent"]))
  return {ranking.get("fightID"): characterParseList}
  

def generateEmbedFromReport(reportData: dict, link: str, description: str = "") -> Embed:
  """
  Generates a Discord Embed from report data acquired from an FFLogs query.
  
  Args:
    `reportData`: A dict representing a json object containing reportData.

  Returns:
    A Discord Embed featuring relevant infomation such as the name of the fight,
    date, number of pulls, whether the fight was cleared, etc.
  
  Raises:
    `ReportDataError`: the reportData is not correctly formatted or missing.
  """
  # print(reportData)
  if "errors" in reportData:
     raise ReportDataError("The received report data is not correctly formatted or missing.")
  # print(reportData.get("data").get("reportData"))
  actors, dateString, fights, rankings = extractReportFields(reportData)
  fightsNameSet =set([fight.get("name") for fight in fights])
  # print(fights)
  titleFight = ""
  if len(fightsNameSet) == 1:
     titleFight = next(iter(fightsNameSet))
  else:
    titleFight = "Multiple Fights"
    description = "Fights: " + ", ".join([fightName for fightName in fightsNameSet])

  pullTotal = len(fights)

  simplifiedRankings = list(map(simplifyRanking, rankings))
  print(simplifiedRankings)

  reportEmbed = Embed(title=titleFight + " - " + dateString)
  reportEmbed.description = description
  reportEmbed.add_field(name="Pulls", value=pullTotal, inline=False)
  reportEmbed.add_field(name="Clear?", value=True, inline=True)
  reportEmbed.url = link

  # print(dateString)

  return reportEmbed

if __name__ == "__main__":
   generateEmbedFromReport(mockExtremeReport, "lol")